{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "MD Script",
	"patterns": [
		{
			"include": "#commentary"
		},
		{
			"include": "#commentary_one_line"
		},
		{
			"include": "#Init"
		},
		{
			"include": "#Engine"
		}
	],
	"repository": {
		"commentary": {
			"name": "comment",
			"begin": ":\\(",
			"end": "\\):"
		},
		"commentary_one_line": {
			"name": "comment",
			"begin": "::",
			"end": "\n"
		},
		"keywords": {
			"patterns": [
				{
					"name": "string.quoted.double.mdscript",
					"begin": "\"",
					"end": "\"",
					"patterns": [
						{
							"name": "constant.character.escape.mdscript",
							"match": "\\\\."
						}
					]
				},
				{
					"name": "keyword.mdscript",
					"match": "\\b(if|while|return)\\b"
				},
				{
					"name": "keyword.control",
					"begin": "(\\bfor\\b) ([(])([_a-zA-Z][_a-zA-Z0-9]{0,})(@[_a-zA-Z][_a-zA-Z0-9]{0,}) (\\bin\\b) (\\brange\\b)(\\[)([0-9],[0-9])(])([)]) {",
					"end": "}",
					"beginCaptures": {
						"0": {
							"patterns": [
								{
									"name": "variable.language",
									"match": "([_a-zA-Z][_a-zA-Z0-9]{0,})(@[_a-zA-Z][_a-zA-Z0-9]{0,}) (\\bin\\b) (\\brange\\b)(\\[)([0-9],[0-9])(])",
									"captures": {
										"0": {
											"patterns": [
												{
													"name": "entity.name.selector",
													"match": "(@[_a-zA-Z][_a-zA-Z0-9]{0,})"
												},
												{
													"name": "keyword.operator",
													"match": "(\\bin\\b)"
												},
												{
													"name": "variable.language",
													"match": "(\\brange\\b)(\\[)([0-9],[0-9])(])",
													"captures": {
														"0": {
															"patterns": [
																{
																	"name": "constant.numeric",
																	"match": "([0-9])"
																},
																{
																	"name": "keyword.operator",
																	"match": ","
																}
															]
														}
													}
												}
											]
										}
									}
								}
							]
						}
					},
					"patterns": [
						{
							"include": "#commentary"
						},
						{
							"include": "#commentary_one_line"
						},
						{
							"include": "#MainClassCollection"
						},
						{
							"name": "error",
							"match": "."
						}
					]
				},
				{
					"name": "keyword.operator",
					"match": "(=|\\.|;|,|\\+|-|=|%|\\/|\\*|<|>)"
				},
				{
					"name": "entity.name.selector",
					"match": "(@[_a-zA-Z][_a-zA-Z0-9]{0,})"
				},
				{
					"name": "variable.language",
					"begin": "bool[(]",
					"end": "[)]",
					"patterns": [
						{
							"name": "constant.numeric",
							"match": "\\b(true|false|[0-1])\\b"
						},
						{
							"name": "error",
							"match": "."
						}
					]
				},
				{
					"name": "variable.language",
					"begin": "int[(]",
					"end": "[)]",
					"patterns": [
						{
							"name": "constant.numeric",
							"match": "\\b([0-9]{1,})\\b"
						},
						{
							"name": "error",
							"match": "."
						}
					]
				}
			]
		},
		"Init": {
			"name": "entity.name.section.mdscript",
			"begin": "init:",
			"end": ":end",
			"patterns": [
				{
					"include": "#InitClasses"
				},
				{
					"include": "#commentary"
				},
				{
					"include": "#commentary_one_line"
				},
				{
					"name": "error",
					"match": "."
				}
			]
		},
		"InitClasses": {
			"name": "entity.name.class",
			"match": "(\\bDatapack\\b)\\.(\\bDescription\\b|\\bVersion\\b|\\bPackFormat\\b|\\bName\\b)(( = [.0-9]{1,})| = (\".{1,}\"|\"[_a-zA-Z][_a-zA-Z0-9]{0,}\"));",
			"captures": {
				"0": {
					"patterns": [
						{
							"name": "variable.language",
							"match": "\\b(Description|Version|PackFormat|Name)\\b"
						},
						{
							"name": "constant.numeric",
							"match": "(([0-9]{1,}\\.[0-9]{1,})|([0-9]{1,}))"
						},
						{
							"name": "string.quoted.double",
							"match": "(\".{1,}\")"
						},
						{
							"name": "keyword.operator",
							"match": "(=|\\.|;)"
						}
					]
				}
			}
		},
		"Engine": {
			"name": "entity.name.section.mdscript",
			"begin": "engine:",
			"end": ":end",
			"patterns": [
				{
					"include": "#EngineClasses"
				},
				{
					"include": "#commentary"
				},
				{
					"include": "#commentary_one_line"
				},
				{
					"name": "error",
					"match": "."
				}
			]
		},
		"EngineClasses": {
			"patterns": [
				{
					"name": "entity.name.method.mdscript",
					"begin": "start \\[",
					"end": "]",
					"patterns": [
						{
							"include": "#commentary"
						},
						{
							"include": "#commentary_one_line"
						},
						{
							"include": "#MainClassCollection"
						},
						{
							"name": "error",
							"match": "."
						}
					]
				}
			]
		},
		"MainClassCollection": {
			"patterns": [
				{
					"include": "#DataClass"
				},
				{
					"include": "#ManagementClass"
				},
				{
					"include": "#DisplayClass"
				},
				{
					"include": "#keywords"
				}
			]
		},
		"DataClass": {
			"patterns": [
				{
					"name": "entity.name.class",
					"match": "(\\bData\\b)\\.(\\bAddVar\\b|\\bSetVar\\b|\\bOperation\\b)([(])(((\"[_a-zA-Z][_a-zA-Z0-9]{0,}\"), \\bvector3\\b[(]([0-9]{1,}), ([0-9]{1,}), ([0-9]{1,})[)], (@[_a-zA-Z][_a-zA-Z0-9]{0,}))|(((\"[_a-zA-Z][_a-zA-Z0-9]{0,}\"), (\\bint\\b|\\bbool\\b)([(](\\btrue\\b|\\bfalse\\b|[0-9]{1,})[)]), (@[_a-zA-Z][_a-zA-Z0-9]{0,}))|(([_a-zA-Z][_a-zA-Z0-9]{0,}), (\\bbool\\b|\\bint\\b)([(](\\btrue\\b|\\bfalse\\b|[0-9]{1,})[)]), (@[_a-zA-Z][_a-zA-Z0-9]{0,}))|(([_a-zA-Z][_a-zA-Z0-9]{0,}) ([+-=%/*<>][=<]{0,1}) ([_a-zA-Z][_a-zA-Z0-9]{0,}), (@[_a-zA-Z][_a-zA-Z0-9]{0,}), (@[_a-zA-Z][_a-zA-Z0-9]{0,}))))([)]);",
					"captures": {
						"0": {
							"patterns": [
								{
									"include": "#keywords"
								},
								{
									"name": "entity.name.function",
									"match": "(\\bAddVar\\b|\\bSetVar\\b|\\bOperation\\b|[(]|[)])"
								},
								{
									"name": "entity.name.class",
									"match": "\\b(Data)\\b"
								},
								{
									"name": "variable.name",
									"match": "."
								}
							]
						}
					}
				}
			]
		},
		"ManagementClass": {
			"patterns": [
				{
					"include": "#commentary"
				},
				{
					"include": "#commentary_one_line"
				},
				{
					"name": "entity.name.class",
					"match": "(\\bManagement\\b)\\.\\b(Add|Remove)\\b[(]((\"(.{1,})\", \"([_a-zA-Z][_a-zA-Z0-9]{0,})\")|(.{1,}))[)];",
					"captures": {
						"0": {
							"name": "entity.name.class",
							"patterns": [
								{
									"include": "#keywords"
								},
								{
									"include": "#commentary"
								},
								{
									"include": "#commentary_one_line"
								},
								{
									"name": "entity.name.class",
									"match": "\\bManagement\\b"
								},
								{
									"name": "entity.name.function",
									"match": "[(]|[)]|\\bAdd\\b|\\bRemove\\b"
								},
								{
									"name": "variable.name",
									"match": "."
								}
							]
						}
					}
				}
			]
		},
		"DisplayClass": {
			
		}
	},
	"scopeName": "source.mdscript",
	"fileTypes": [
		"mds",
		"mdscript"
	]
}